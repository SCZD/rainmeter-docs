<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Using a Measure as a Variable - Rainmeter Tips &amp; Tricks</title>
	<link href="/css/main.css?v=3" rel="stylesheet">
	<link rel="shortcut icon" href="//www.rainmeter.net/favicon.ico">
	<!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6/html5shiv.min.js"></script><![endif]-->
</head>
<body>
	<div id="wrapper">
		<div id="top">
			<div class="container">
				<a id="logo" href="//rainmeter.net/"></a>
				<nav id="nav">
					<ul>
					<li><a href="//www.rainmeter.net">Home</a>
					<li><a href="/" class="active">Documentation</a>
					<li><a href="//www.rainmeter.net/discover">Discover</a>
					<li><a href="//forum.rainmeter.net">Community</a>
					</ul>
				</nav>
			</div>
		</div>

		<div class="container">
			<div class="row">
				<div id="side-content">
	<h1 id="category"><a href="/tips">Tips &amp; Tricks</a></h1>

	<form id="search-form" method="get" action="http://www.google.com/search">
		<input name="sitesearch" value="docs.rainmeter.net" type="hidden">
		<input id="search" name="q" maxlength="255" size="16" placeholder="Search" type="text">
	</form>

	<nav id="tree">
		<h1>Contents</h1>
<ul>
<li><a href="/tips/#BeyondTheBasics">Beyond the Basics</a>
<li><a href="/tips/#GoodToKnow">Good To Know</a>
<li><a href="/tips/#GettingThingsDone">Getting Things Done</a>
</ul>

<h1>More</h1>
<ul>
<li><a href="/manual/">4.0 Final Manual</a>
<li><a href="/manual-beta/">4.1 Beta Manual</a>
<li><a href="/snippets/">Snippets</a>
<li><a href="/developers/">Developers</a>
<li><a href="/history/">Version History</a>
</ul>

	</nav>
</div>
<div id="content">
	<header>
		<h1>Using a Measure as a Variable</h1>
	</header>
	<article><p>In Rainmeter, <a href="/manual/variables/#DynamicVariables">dynamic variables</a> (DVs) let you use measure values almost anywhere you want. When you use a measure value in a <a href="/manual/measures/calc/">Calc</a> formula, there are special rules to consider. A Calc formula is the only place where you do not need DVs to use another measure's value. For example:</p>

<figure class="highlight ini"><table><tr><td class="code"><pre><div class="line"><span class="section">[MeasureA]</span></div><div class="line"><span class="attr">Measure</span>=...</div><div class="line"></div><div class="line"><span class="section">[MeasureB]</span></div><div class="line"><span class="attr">Measure</span>=Calc</div><div class="line"><span class="attr">Formula</span>=MeasureA+<span class="number">3</span></div></pre></td></tr></table></figure>

<p>Sometimes, however, you may still want to use DVs to get a measure value into a Calc formula. Why? Because in fact, every measure has two values: a <b>number value</b> and a <b>string value</b>. Normally, Calc formulas use the number value. But using DVs (with brackets around the measure name) forces Rainmeter to use the string value. Which means that this...</p>

<figure class="highlight ini"><table><tr><td class="code"><pre><div class="line"><span class="section">[MeasureB]</span></div><div class="line"><span class="attr">Measure</span>=Calc</div><div class="line"><span class="attr">Formula</span>=MeasureA+<span class="number">3</span></div></pre></td></tr></table></figure>

<p>...does not always mean the same thing as this:</p>

<figure class="highlight ini"><table><tr><td class="code"><pre><div class="line"><span class="section">[MeasureB]</span></div><div class="line"><span class="attr">Measure</span>=Calc</div><div class="line"><span class="attr">Formula</span>=[MeasureA]+<span class="number">3</span></div><div class="line"><span class="attr">DynamicVariables</span>=<span class="number">1</span></div></pre></td></tr></table></figure>

<h3>When should I use brackets?</h3>

<p><b>In general, you should use measures in Calc formulas as numbers (without brackets).</b> This is the "safe" approach, because:</p>

<ul>

	<li><p>If a measure's string and number values are the <em>same</em>, then dynamic variables are unnecessary. Calc measures without DVs are a tiny bit faster, and your formula will behave consistently whether or not DVs are enabled.</p></li>

	<li><p>If the string and number values are <em>different</em>, then the string value may be inappropriate for mathematical calculations.</p></li>

</ul>

<p>The common exception to this rule is when a <b>substitute</b> has been applied. (See below.)</p>

<h3>When are the string and number values different?</h3>

<ol>

	<li>
	<p><b>No math.</b> If the original measure value contains any non-numeric characters, aside from valid <a href="/manual/measures/calc/#Formulas">operators</a>, the number value is zero. This includes letters, punctuation and special characters.</p>
	<p>You'll probably never use a measure like this in a Calc formula to begin with.</p>
	</li>

	<li>
	<p><b>Rounding.</b> Even when a measure gives you an actual number, Rainmeter may round the string value to a certain decimal place. The number value preserves the "true" value, which is always better for calculation.</p>
	<p>Even if you want a rounded number, the <a href="/manual/measures/calc/#Functions">ROUND(x[,precision])</a> calculator function will give you much finer control over the result.</p>
	</li>

	<li>
	<p><b>Formatting.</b> Some measures return a formatted string value that is meant for display, but not for calculations. For example, the <a href="/manual/measures/time/">Time</a> measure gives a string value with hours, minutes and seconds ("HH:MM:SS"), which is how a real person would want to see the time, but which makes no sense in a math equation. The number value gives the raw <a href="http://msdn.microsoft.com/en-us/library/ms724284(VS.85).aspx">Windows timestamp</a>, which <em>can</em> be used by a Calc measure, e.g. to calculate the difference between two dates.</p>

	<p>There may be cases in which you would want to use a formatted string value in a Calc formula, but these would likely be rare and unorthodox.</p>
	</li>

	<li>
	<p><b>Substitution.</b> Measure <a href="/manual/measures/general-options/substitute/">substitution</a> is applied only to the string value, not the number value. For example:</p>

<figure class="highlight ini"><table><tr><td class="code"><pre><div class="line"><span class="section">[MeasureA]</span></div><div class="line"><span class="attr">Measure</span>=Calc</div><div class="line"><span class="attr">Formula</span>=<span class="number">1</span></div><div class="line"><span class="attr">Substitute</span>=<span class="string">"1"</span>:<span class="string">"2"</span></div><div class="line"></div><div class="line"><span class="section">[MeasureB]</span></div><div class="line"><span class="attr">Measure</span>=Calc</div><div class="line"><span class="attr">Formula</span>=MeasureA+<span class="number">3</span></div><div class="line"></div><div class="line"><span class="section">[MeasureC]</span></div><div class="line"><span class="attr">Measure</span>=Calc</div><div class="line"><span class="attr">Formula</span>=[MeasureA]+<span class="number">3</span></div><div class="line"><span class="attr">DynamicVariables</span>=<span class="number">1</span></div></pre></td></tr></table></figure>

	<p>MeasureB uses the number value of MeasureA. It ignores the Substitute string on Measure A. Therefore, MeasureB returns a value of <em>4</em>. In MeasureC, we use DVs to get the string value of MeasureA. This value has substituted the original value, "1", with "2". So MeasureC returns a value of <em>5</em>.</p>

	<p>This means that if you need the substituted value of a measure, you will need to use DVs and brackets. This can be useful when the original value of a measure is not a number at all (as in case #1), but a Substitute is used to change it into one:</p>

<figure class="highlight ini"><table><tr><td class="code"><pre><div class="line"><span class="section">[MeasureGetStatus]</span></div><div class="line"><span class="attr">Measure</span>=Plugin</div><div class="line"><span class="attr">Plugin</span>=Plugins\WebParser.dll</div><div class="line"><span class="attr">URL</span>=http://www.somesite.com/logs/status.xml</div><div class="line"><span class="attr">RegExp</span>=<span class="string">"(?siU)&lt;status&gt;(.*)&lt;/status&gt;"</span></div><div class="line"><span class="attr">StringIndex</span>=<span class="number">1</span></div><div class="line"><span class="attr">Substitute</span>=<span class="string">"Running"</span>:<span class="string">"1"</span>,<span class="string">"Offline"</span>:<span class="string">"0"</span></div><div class="line"></div><div class="line"><span class="section">[MeasureCheckStatus]</span></div><div class="line"><span class="attr">Measure</span>=Calc</div><div class="line"><span class="attr">Formula</span>=[MeasureGetStatus]</div><div class="line"><span class="attr">IfEqualValue</span>=<span class="number">1</span></div><div class="line"><span class="attr">IfEqualAction</span>=[!SetOption Light MeterStyle <span class="string">"Green"</span>]</div><div class="line"><span class="attr">IfBelowValue</span>=<span class="number">1</span></div><div class="line"><span class="attr">IfBelowAction</span>=[!SetOption Light MeterStyle <span class="string">"Red"</span>]</div><div class="line"><span class="attr">DynamicVariables</span>=<span class="number">1</span></div></pre></td></tr></table></figure>

	<p>In this case, we have a web feed that returns either "Running" or "Offline". But we can't do math on a word&mdash;since neither of those values is a number or mathematical formula, the number value for both would be zero. Instead, we use a Substitute to transform the string value into "1" or "0", respectively. That way, our Calc measure can compare it to our IfEqualValue and IfBelowValue, and take the right action. If 1 ("Running"), then the light turns green; if 0 ("Offline"), the light turns red.</p>

	<p>Substitution is virtually the only case in which you would <em>want</em> to use a string value in a Calc formula.</p>
	</li>

</ol>

<h3>Other Notes</h3>

<p>You can use measures as number values if you are using DVs elsewhere in the Calc measure. You can even mix types of measure values within the same formula:</p>

<figure class="highlight ini"><table><tr><td class="code"><pre><div class="line"><span class="section">[MeasureD]</span></div><div class="line"><span class="attr">Measure</span>=Calc</div><div class="line"><span class="attr">Formula</span>=MeasureA+[MeasureA]+MeasureB+<span class="number">3</span></div><div class="line"><span class="attr">IfAboveValue</span>=[MeasureC]</div><div class="line"><span class="attr">IfAboveAction</span>=!HideMeter MeterE</div><div class="line"><span class="attr">DynamicVariables</span>=<span class="number">1</span></div></pre></td></tr></table></figure>

<h3>A quick reference to using measure values</h3>

<ul>
<li>All measures that return numbers create them as both a "number" and a "string".</li>

<li>Most measures return a number and a string that are the same. Some measures (Win7Audio, Time, NowPlaying for instance) can return a "number" and a "string" that are different.</li>

<li>Substitute acts only on the string value of a measure.</li>

<li>The About window in the Rainmeter context menu displays the string value of measures.</li>

<li>When you use the name of a measure in MeasureName= on a meter, the type of meter determines which is used. For instance, Bar meters use the number value, and String meters use the string value. Again, in most cases this is not important, as they are for practical purposes the same thing.</li>

<li>When you use the name of a measure in a Calc measure in a formula (without square brackets), such as Formula=(200 * MeasureName), the number value is used.</li>

<li>When you use the name of a measure in a Calc measure or other formula (with square brackets and DynamicVariables=1), then the string value is used.</li>

<li>The <a href="/manual/variables/section-variables/#Colon">Section Variables</a> <code>[MeasureName:]</code> functionality offers some additional control. Used with DynamicVariables=1, it uses the number value of the measure. This is particularly useful where you want to use the value of a measure dynamically in a formula on a meter or measure, while not getting the string or Substituted value.</li>
</ul>
</article>
</div>

			</div>
		</div>

		<div id="footer-push"></div>
	</div>

	<script src="/js/main.js?v=5"></script>
</body>
</html>
